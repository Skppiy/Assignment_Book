
<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Assignment Notebook</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            color: #333;
        }

```
    .container { max-width: 1000px; margin: 0 auto; }
    
    .header {
        text-align: center;
        padding: 30px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-radius: 15px;
        margin-bottom: 30px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    
    .header h1 { margin: 0 0 10px 0; font-size: 2.5em; }
    .header p { margin: 0; font-size: 1.1em; opacity: 0.9; }
    
    .nav {
        display: flex;
        gap: 10px;
        background: white;
        padding: 10px;
        border-radius: 15px;
        margin-bottom: 30px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    
    .nav button {
        flex: 1;
        padding: 15px;
        border: none;
        background: transparent;
        border-radius: 10px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s ease;
        color: #333;
    }
    
    .nav button.active { background: #667eea; color: white; }
    .nav button:hover:not(.active) { background: #f8f9fa; }
    
    .view { display: none; }
    .view.active { display: block; }
    
    .card {
        background: white;
        padding: 25px;
        border-radius: 15px;
        margin-bottom: 20px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    
    .date-nav {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 20px;
        margin-bottom: 20px;
        flex-wrap: wrap;
    }
    
    .date-nav button {
        background: #667eea;
        color: white;
        border: none;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        cursor: pointer;
        font-size: 1.2em;
        transition: all 0.3s ease;
    }
    
    .date-nav button:hover { transform: scale(1.1); }
    
    .current-date {
        font-size: 1.3em;
        font-weight: bold;
        text-align: center;
        min-width: 200px;
    }
    
    .btn {
        padding: 10px 20px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        margin: 5px;
        transition: all 0.3s ease;
    }
    
    .btn:hover { transform: translateY(-1px); }
    .btn-primary { background: #667eea; color: white; }
    .btn-success { background: #4caf50; color: white; }
    .btn-danger { background: #f44336; color: white; }
    .btn-small { padding: 5px 10px; font-size: 0.9em; }
    
    .form-control {
        width: 100%;
        padding: 10px;
        border: 2px solid #ddd;
        border-radius: 8px;
        margin-bottom: 10px;
        font-size: 16px;
        transition: border-color 0.3s ease;
    }
    
    .form-control:focus { outline: none; border-color: #667eea; }
    
    .class-card {
        background: white;
        padding: 20px;
        border-radius: 15px;
        margin-bottom: 20px;
        border-left: 5px solid #667eea;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    
    .class-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        flex-wrap: wrap;
    }
    
    .class-name { font-size: 1.3em; font-weight: bold; }
    .class-period { background: #f8f9fa; padding: 5px 15px; border-radius: 20px; font-size: 0.9em; color: #666; }
    
    .section {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 10px;
        margin-bottom: 15px;
    }
    
    .section h4 { margin: 0 0 15px 0; color: #555; font-size: 1.1em; }
    .completed-section { border-left: 3px solid #4caf50; }
    .notes-section { border-left: 3px solid #2196f3; }
    
    .work-item {
        background: white;
        padding: 10px;
        border-radius: 8px;
        margin-bottom: 10px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .empty-state { text-align: center; padding: 40px; color: #666; }
    .empty-state .icon { font-size: 4em; margin-bottom: 20px; }
    
    .filter-section {
        background: white;
        padding: 20px;
        border-radius: 15px;
        margin-bottom: 20px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        text-align: center;
    }
    
    .class-edit-item {
        background: white;
        padding: 15px;
        border-radius: 10px;
        margin-bottom: 15px;
        border-left: 5px solid #667eea;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    
    .class-edit-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
    }
    
    .class-edit-form {
        display: none;
        margin-top: 15px;
        padding: 15px;
        background: #f8f9fa;
        border-radius: 8px;
    }
    
    .class-edit-form.active {
        display: block;
    }
    
    .btn-edit {
        background: #17a2b8;
        color: white;
        padding: 5px 10px;
        font-size: 0.9em;
        margin-right: 5px;
    }
    
    @media (max-width: 768px) {
        .nav { flex-direction: column; }
        body { padding: 10px; }
        .date-nav { flex-direction: column; gap: 10px; }
        .class-header { flex-direction: column; align-items: flex-start; gap: 10px; }
    }
</style>
```

</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìö My Assignment Notebook</h1>
            <p>Digital planner for organized students</p>
        </div>

```
    <div class="nav">
        <button class="nav-btn active" data-view="journal">üìù Daily Journal</button>
        <button class="nav-btn" data-view="assignments">üìã Assignment List</button>
        <button class="nav-btn" data-view="notes">üìö My Notes</button>
        <button class="nav-btn" data-view="completed">‚úÖ Completed Work</button>
        <button class="nav-btn" data-view="setup">‚öôÔ∏è Setup</button>
    </div>
    
    <!-- Daily Journal View -->
    <div class="view active" id="journalView">
        <div class="card">
            <div class="date-nav">
                <button id="prevDay" title="Previous Day">&larr;</button>
                <div class="current-date" id="currentDate">Today</div>
                <button id="nextDay" title="Next Day">&rarr;</button>
                <button class="btn btn-success" id="todayBtn">üìÖ Today</button>
            </div>
        </div>
        <div id="classesContainer"></div>
    </div>
    
    <!-- Assignment List View -->
    <div class="view" id="assignmentsView">
        <div class="filter-section">
            <h2>üìã Assignment List</h2>
            <p>Your pending assignments will appear here.</p>
            <button class="btn btn-primary" id="exportBtn">üíæ Download Backup</button>
        </div>
        <div id="assignmentsList">
            <div class="empty-state">
                <div class="icon">üìã</div>
                <h3>No assignments yet!</h3>
                <p>Add assignments in your Daily Journal to see them here.</p>
            </div>
        </div>
    </div>
    
    <!-- Notes View -->
    <div class="view" id="notesView">
        <div class="filter-section">
            <h2>üìö My Notes</h2>
            <label for="notesFilter">Filter by Subject: </label>
            <select id="notesFilter" class="form-control" style="width: auto; display: inline-block;">
                <option value="all">All Classes</option>
            </select>
        </div>
        <div id="notesList">
            <div class="empty-state">
                <div class="icon">üìù</div>
                <h3>No notes yet!</h3>
                <p>Start taking notes in your Daily Journal to see them here.</p>
            </div>
        </div>
    </div>
    
    <!-- Completed Work View -->
    <div class="view" id="completedView">
        <div class="filter-section">
            <h2>‚úÖ Completed Work</h2>
            <label for="completedFilter">Filter by Subject: </label>
            <select id="completedFilter" class="form-control" style="width: auto; display: inline-block;">
                <option value="all">All Classes</option>
            </select>
        </div>
        <div id="completedList">
            <div class="empty-state">
                <div class="icon">‚úÖ</div>
                <h3>No completed work yet!</h3>
                <p>Mark work as completed in your Daily Journal to see it here.</p>
            </div>
        </div>
    </div>
    
    <!-- Setup View -->
    <div class="view" id="setupView">
        <div class="card">
            <h2>‚öôÔ∏è Setup Your Classes</h2>
            <p>Add new classes or edit existing ones.</p>
            
            <!-- Existing Classes -->
            <div style="margin: 20px 0;">
                <h3>Your Classes</h3>
                <div id="existingClasses">
                    <!-- Existing classes will be populated here -->
                </div>
            </div>
            
            <!-- Add New Class -->
            <div style="margin: 20px 0; padding: 20px; background: #f0f8ff; border-radius: 10px;">
                <h3>Add New Class</h3>
                <input type="text" class="form-control" id="className" placeholder="Class name (e.g., AP Biology)">
                <input type="text" class="form-control" id="classPeriod" placeholder="Period (e.g., 1st Period)">
                <button class="btn btn-primary" id="addClassBtn">Add Class</button>
            </div>
            
            <div style="margin-top: 30px; padding: 20px; background: #e8f4f8; border-radius: 10px;">
                <h3>üíæ Backup & Restore</h3>
                <button class="btn btn-primary" id="exportBtn2">üìÑ Download Backup</button>
                <input type="file" id="importFile" accept=".json" style="display: none;">
                <button class="btn btn-success" id="importBtn">üì§ Restore Backup</button>
            </div>
        </div>
    </div>
</div>

<script>
    // App State
    let currentDate = new Date();
    let classes = [
        { id: 1, name: "AP Biology", period: "1st Period" },
        { id: 2, name: "Algebra 2", period: "2nd Period" },
        { id: 3, name: "English 10", period: "3rd Period" }
    ];
    let journalEntries = {};
    let nextClassId = 4;
    let currentNotesFilter = 'all';
    let currentCompletedFilter = 'all';
    
    // Utility Functions
    function getDateKey(date) {
        return date.toISOString().split('T')[0];
    }
    
    function saveData() {
        try {
            localStorage.setItem('assignmentNotebook_classes', JSON.stringify(classes));
            localStorage.setItem('assignmentNotebook_entries', JSON.stringify(journalEntries));
            localStorage.setItem('assignmentNotebook_nextClassId', nextClassId.toString());
        } catch (e) {
            console.error('Save failed:', e);
        }
    }
    
    function loadData() {
        try {
            const savedClasses = localStorage.getItem('assignmentNotebook_classes');
            const savedEntries = localStorage.getItem('assignmentNotebook_entries');
            const savedNextId = localStorage.getItem('assignmentNotebook_nextClassId');
            
            if (savedClasses) classes = JSON.parse(savedClasses);
            if (savedEntries) journalEntries = JSON.parse(savedEntries);
            if (savedNextId) nextClassId = parseInt(savedNextId);
        } catch (e) {
            console.error('Load failed:', e);
        }
    }
    
    // Navigation
    function showView(viewName) {
        document.querySelectorAll('.view').forEach(view => view.classList.remove('active'));
        document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
        
        document.getElementById(viewName + 'View').classList.add('active');
        document.querySelector(`[data-view="${viewName}"]`).classList.add('active');
        
        if (viewName === 'journal') renderJournal();
        else if (viewName === 'notes') renderNotes();
        else if (viewName === 'completed') renderCompleted();
        else if (viewName === 'setup') renderSetup();
    }
    
    // Date Functions
    function updateDateDisplay() {
        const today = new Date();
        const isToday = currentDate.toDateString() === today.toDateString();
        const prefix = isToday ? 'Today, ' : '';
        const dateStr = currentDate.toLocaleDateString('en-US', { 
            weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' 
        });
        document.getElementById('currentDate').textContent = prefix + dateStr;
    }
    
    function changeDate(days) {
        currentDate.setDate(currentDate.getDate() + days);
        updateDateDisplay();
        renderJournal();
    }
    
    function goToToday() {
        currentDate = new Date();
        updateDateDisplay();
        renderJournal();
    }
    
    // Journal Functions
    function renderJournal() {
        const container = document.getElementById('classesContainer');
        if (classes.length === 0) {
            container.innerHTML = '<div class="card"><div class="empty-state"><div class="icon">üìö</div><h3>No classes set up yet!</h3><p>Go to Setup to add your classes.</p></div></div>';
            return;
        }
        
        const dateKey = getDateKey(currentDate);
        const dayEntries = journalEntries[dateKey] || {};
        
        let html = '';
        classes.forEach(classItem => {
            const entry = dayEntries[classItem.id] || { completed: [], notes: '' };
            
            html += `
                <div class="class-card">
                    <div class="class-header">
                        <div class="class-name">${classItem.name}</div>
                        <div class="class-period">${classItem.period}</div>
                    </div>
                    
                    <div class="section completed-section">
                        <h4>‚úÖ Work Completed Today</h4>
                        <div id="completed-${classItem.id}">
                            ${entry.completed.map(work => `
                                <div class="work-item">
                                    <span>${work}</span>
                                    <button class="btn btn-danger btn-small" onclick="removeWork(${classItem.id}, '${work.replace(/'/g, "\\'")}')">‚úï</button>
                                </div>
                            `).join('')}
                        </div>
                        <input type="text" class="form-control work-input" data-class="${classItem.id}" placeholder="What did you complete today?">
                        <button class="btn btn-primary add-work-btn" data-class="${classItem.id}">Add Work</button>
                    </div>
                    
                    <div class="section notes-section">
                        <h4>üìù Class Notes</h4>
                        <textarea class="form-control notes-textarea" data-class="${classItem.id}" rows="3" placeholder="What did you learn today?">${entry.notes}</textarea>
                        <small style="color: #666; font-size: 0.85em;">üíæ Notes save automatically</small>
                    </div>
                </div>
            `;
        });
        
        container.innerHTML = html;
        
        // Add event listeners
        document.querySelectorAll('.add-work-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const classId = parseInt(this.dataset.class);
                addWork(classId);
            });
        });
        
        document.querySelectorAll('.work-input').forEach(input => {
            input.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    const classId = parseInt(this.dataset.class);
                    addWork(classId);
                }
            });
        });
        
        document.querySelectorAll('.notes-textarea').forEach(textarea => {
            textarea.addEventListener('blur', function() {
                const classId = parseInt(this.dataset.class);
                saveNotes(classId);
            });
        });
    }
    
    function addWork(classId) {
        const input = document.querySelector(`.work-input[data-class="${classId}"]`);
        const work = input.value.trim();
        if (!work) return;
        
        const dateKey = getDateKey(currentDate);
        if (!journalEntries[dateKey]) journalEntries[dateKey] = {};
        if (!journalEntries[dateKey][classId]) journalEntries[dateKey][classId] = { completed: [], notes: '' };
        
        journalEntries[dateKey][classId].completed.push(work);
        input.value = '';
        saveData();
        renderJournal();
    }
    
    function removeWork(classId, work) {
        const dateKey = getDateKey(currentDate);
        if (journalEntries[dateKey] && journalEntries[dateKey][classId]) {
            journalEntries[dateKey][classId].completed = 
                journalEntries[dateKey][classId].completed.filter(w => w !== work);
            saveData();
            renderJournal();
        }
    }
    
    function saveNotes(classId) {
        const textarea = document.querySelector(`.notes-textarea[data-class="${classId}"]`);
        const notes = textarea.value;
        const dateKey = getDateKey(currentDate);
        
        if (!journalEntries[dateKey]) journalEntries[dateKey] = {};
        if (!journalEntries[dateKey][classId]) journalEntries[dateKey][classId] = { completed: [], notes: '' };
        
        journalEntries[dateKey][classId].notes = notes;
        saveData();
    }
    
    // Setup Functions
    function renderSetup() {
        const container = document.getElementById('existingClasses');
        
        if (classes.length === 0) {
            container.innerHTML = '<p style="color: #666; text-align: center; padding: 20px;">No classes added yet. Add your first class below!</p>';
            return;
        }
        
        container.innerHTML = classes.map(cls => `
            <div class="class-edit-item">
                <div class="class-edit-header">
                    <div>
                        <div style="font-weight: bold; font-size: 1.1em;">${cls.name}</div>
                        <div style="color: #666; font-size: 0.9em;">${cls.period}</div>
                    </div>
                    <div>
                        <button class="btn btn-edit edit-class-btn" data-id="${cls.id}">‚úèÔ∏è Edit</button>
                        <button class="btn btn-danger btn-small delete-class-btn" data-id="${cls.id}">üóëÔ∏è Delete</button>
                    </div>
                </div>
                <div class="class-edit-form" id="editForm-${cls.id}">
                    <input type="text" class="form-control" id="editName-${cls.id}" value="${cls.name}" placeholder="Class name">
                    <input type="text" class="form-control" id="editPeriod-${cls.id}" value="${cls.period}" placeholder="Period">
                    <button class="btn btn-success save-class-btn" data-id="${cls.id}">üíæ Save Changes</button>
                    <button class="btn btn-secondary cancel-edit-btn" data-id="${cls.id}">‚ùå Cancel</button>
                </div>
            </div>
        `).join('');
        
        // Add event listeners for edit buttons
        document.querySelectorAll('.edit-class-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const classId = parseInt(this.dataset.id);
                showEditForm(classId);
            });
        });
        
        // Add event listeners for delete buttons
        document.querySelectorAll('.delete-class-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const classId = parseInt(this.dataset.id);
                deleteClass(classId);
            });
        });
        
        // Add event listeners for save buttons
        document.querySelectorAll('.save-class-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const classId = parseInt(this.dataset.id);
                saveClassEdit(classId);
            });
        });
        
        // Add event listeners for cancel buttons
        document.querySelectorAll('.cancel-edit-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const classId = parseInt(this.dataset.id);
                hideEditForm(classId);
            });
        });
    }
    
    function showEditForm(classId) {
        // Hide all other edit forms
        document.querySelectorAll('.class-edit-form').forEach(form => {
            form.classList.remove('active');
        });
        
        // Show the specific edit form
        document.getElementById(`editForm-${classId}`).classList.add('active');
    }
    
    function hideEditForm(classId) {
        document.getElementById(`editForm-${classId}`).classList.remove('active');
    }
    
    function saveClassEdit(classId) {
        const nameInput = document.getElementById(`editName-${classId}`);
        const periodInput = document.getElementById(`editPeriod-${classId}`);
        
        const name = nameInput.value.trim();
        const period = periodInput.value.trim();
        
        if (!name) {
            alert('Please enter a class name');
            return;
        }
        
        // Find and update the class
        const classIndex = classes.findIndex(c => c.id === classId);
        if (classIndex !== -1) {
            classes[classIndex].name = name;
            classes[classIndex].period = period || classes[classIndex].period;
            
            saveData();
            renderSetup();
            populateFilters();
            alert('‚úÖ Class updated successfully!');
            
            // If we're currently viewing the journal, re-render it to show updated class names
            if (document.getElementById('journalView').classList.contains('active')) {
                renderJournal();
            }
        }
    }
    
    function deleteClass(classId) {
        const classToDelete = classes.find(c => c.id === classId);
        if (!classToDelete) return;
        
        const confirmMessage = `Are you sure you want to delete "${classToDelete.name}"?\n\nThis will also delete all associated journal entries and notes for this class.`;
        
        if (confirm(confirmMessage)) {
            // Remove class from classes array
            classes = classes.filter(c => c.id !== classId);
            
            // Remove all journal entries for this class
            Object.keys(journalEntries).forEach(date => {
                if (journalEntries[date][classId]) {
                    delete journalEntries[date][classId];
                }
            });
            
            saveData();
            renderSetup();
            populateFilters();
            alert('üóëÔ∏è Class deleted successfully!');
            
            // If we're currently viewing the journal, re-render it
            if (document.getElementById('journalView').classList.contains('active')) {
                renderJournal();
            }
        }
    }
    
    function addClass() {
        const nameInput = document.getElementById('className');
        const periodInput = document.getElementById('classPeriod');
        
        const name = nameInput.value.trim();
        const period = periodInput.value.trim();
        
        if (!name) {
            alert('Please enter a class name');
            return;
        }
        
        classes.push({
            id: nextClassId++,
            name: name,
            period: period || `Period ${classes.length + 1}`
        });
        
        nameInput.value = '';
        periodInput.value = '';
        saveData();
        alert('Class added successfully!');
        populateFilters();
        renderSetup(); // Re-render to show the new class
    }
    
    // Filter Functions
    function populateFilters() {
        const notesFilter = document.getElementById('notesFilter');
        const completedFilter = document.getElementById('completedFilter');
        
        let options = '<option value="all">All Classes</option>';
        classes.forEach(cls => {
            options += `<option value="${cls.id}">${cls.name}</option>`;
        });
        
        notesFilter.innerHTML = options;
        completedFilter.innerHTML = options;
    }
    
    function renderNotes() {
        populateFilters();
        const container = document.getElementById('notesList');
        const allNotes = [];
        
        Object.keys(journalEntries).forEach(date => {
            Object.keys(journalEntries[date]).forEach(classId => {
                const entry = journalEntries[date][classId];
                if (entry.notes && entry.notes.trim()) {
                    const className = classes.find(c => c.id == classId)?.name || 'Unknown Class';
                    if (currentNotesFilter === 'all' || classId == currentNotesFilter) {
                        allNotes.push({ date, className, notes: entry.notes });
                    }
                }
            });
        });
        
        if (allNotes.length === 0) {
            container.innerHTML = '<div class="empty-state"><div class="icon">üìù</div><h3>No notes found!</h3><p>Start taking notes in your Daily Journal.</p></div>';
            return;
        }
        
        allNotes.sort((a, b) => new Date(b.date) - new Date(a.date));
        
        container.innerHTML = allNotes.map(note => `
            <div class="card" style="margin-bottom: 15px;">
                <h4>${note.className}</h4>
                <p style="color: #666; font-size: 0.9em; margin-bottom: 10px;">
                    ${new Date(note.date).toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}
                </p>
                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; white-space: pre-wrap;">${note.notes}</div>
            </div>
        `).join('');
    }
    
    function renderCompleted() {
        populateFilters();
        const container = document.getElementById('completedList');
        const allCompleted = [];
        
        Object.keys(journalEntries).forEach(date => {
            Object.keys(journalEntries[date]).forEach(classId => {
                const entry = journalEntries[date][classId];
                if (entry.completed && entry.completed.length > 0) {
                    const className = classes.find(c => c.id == classId)?.name || 'Unknown Class';
                    entry.completed.forEach(work => {
                        if (currentCompletedFilter === 'all' || classId == currentCompletedFilter) {
                            allCompleted.push({ date, className, work });
                        }
                    });
                }
            });
        });
        
        if (allCompleted.length === 0) {
            container.innerHTML = '<div class="empty-state"><div class="icon">‚úÖ</div><h3>No completed work found!</h3><p>Mark work as completed in your Daily Journal.</p></div>';
            return;
        }
        
        allCompleted.sort((a, b) => new Date(b.date) - new Date(a.date));
        
        container.innerHTML = allCompleted.map(item => `
            <div class="work-item" style="margin-bottom: 10px;">
                <div>
                    <div style="font-weight: 600;">${item.work}</div>
                    <div style="font-size: 0.9em; color: #666;">${item.className} ‚Ä¢ ${new Date(item.date).toLocaleDateString()}</div>
                </div>
            </div>
        `).join('');
    }
    
    // Backup Functions
    function exportData() {
        const data = {
            version: "1.0",
            exportDate: new Date().toISOString(),
            classes: classes,
            journalEntries: journalEntries
        };
        
        const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const link = document.createElement('a');
        link.href = url;
        link.download = 'MyAssignments_' + new Date().toISOString().split('T')[0] + '.json';
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        URL.revokeObjectURL(url);
        alert('üìÑ Backup downloaded successfully!');
    }
    
    function importData(event) {
        const file = event.target.files[0];
        if (!file) return;
        
        const reader = new FileReader();
        reader.onload = function(e) {
            try {
                const data = JSON.parse(e.target.result);
                if (confirm('This will replace your current data. Continue?')) {
                    if (data.classes) classes = data.classes;
                    if (data.journalEntries) journalEntries = data.journalEntries;
                    saveData();
                    alert('‚úÖ Data restored successfully!');
                    location.reload();
                }
            } catch (error) {
                alert('‚ùå Invalid backup file');
            }
        };
        reader.readAsText(file);
        event.target.value = '';
    }
    
    // Event Listeners
    document.addEventListener('DOMContentLoaded', function() {
        // Navigation
        document.querySelectorAll('.nav-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                showView(this.dataset.view);
            });
        });
        
        // Date navigation
        document.getElementById('prevDay').addEventListener('click', () => changeDate(-1));
        document.getElementById('nextDay').addEventListener('click', () => changeDate(1));
        document.getElementById('todayBtn').addEventListener('click', goToToday);
        
        // Setup
        document.getElementById('addClassBtn').addEventListener('click', addClass);
        
        // Show setup view initially if no classes
        if (classes.length > 0) {
            renderSetup();
        }
        
        // Export buttons
        document.getElementById('exportBtn').addEventListener('click', exportData);
        document.getElementById('exportBtn2').addEventListener('click', exportData);
        
        // Import
        document.getElementById('importBtn').addEventListener('click', () => {
            document.getElementById('importFile').click();
        });
        document.getElementById('importFile').addEventListener('change', importData);
        
        // Filters
        document.getElementById('notesFilter').addEventListener('change', function() {
            currentNotesFilter = this.value;
            renderNotes();
        });
        
        document.getElementById('completedFilter').addEventListener('change', function() {
            currentCompletedFilter = this.value;
            renderCompleted();
        });
        
        // Initialize app
        loadData();
        updateDateDisplay();
        renderJournal();
        populateFilters();
    });
</script>
```

</body>
</html>
