<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Assignment Notebook</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            color: #333;
        }

```
    .container { max-width: 1000px; margin: 0 auto; }
    
    .header {
        text-align: center;
        padding: 30px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-radius: 15px;
        margin-bottom: 30px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    
    .header h1 { margin: 0 0 10px 0; font-size: 2.5em; }
    .header p { margin: 0; font-size: 1.1em; opacity: 0.9; }
    
    .nav {
        display: flex;
        gap: 10px;
        background: white;
        padding: 10px;
        border-radius: 15px;
        margin-bottom: 30px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    
    .nav button {
        flex: 1;
        padding: 15px;
        border: none;
        background: transparent;
        border-radius: 10px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s ease;
        color: #333;
    }
    
    .nav button.active { background: #667eea; color: white; }
    .nav button:hover:not(.active) { background: #f8f9fa; }
    
    .view { display: none; }
    .view.active { display: block; }
    
    .card {
        background: white;
        padding: 25px;
        border-radius: 15px;
        margin-bottom: 20px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    
    .date-nav {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 20px;
        margin-bottom: 20px;
        flex-wrap: wrap;
    }
    
    .date-nav button {
        background: #667eea;
        color: white;
        border: none;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        cursor: pointer;
        font-size: 1.2em;
        transition: all 0.3s ease;
    }
    
    .date-nav button:hover { transform: scale(1.1); }
    
    .current-date {
        font-size: 1.3em;
        font-weight: bold;
        text-align: center;
        min-width: 200px;
    }
    
    .btn {
        padding: 10px 20px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        margin: 5px;
        transition: all 0.3s ease;
    }
    
    .btn:hover { transform: translateY(-1px); }
    .btn-primary { background: #667eea; color: white; }
    .btn-success { background: #4caf50; color: white; }
    .btn-danger { background: #f44336; color: white; }
    .btn-warning { background: #ff9800; color: white; }
    .btn-small { padding: 5px 10px; font-size: 0.9em; }
    .btn-edit { background: #17a2b8; color: white; }
    
    .form-control {
        width: 100%;
        padding: 10px;
        border: 2px solid #ddd;
        border-radius: 8px;
        margin-bottom: 10px;
        font-size: 16px;
        transition: border-color 0.3s ease;
    }
    
    .form-control:focus { outline: none; border-color: #667eea; }
    
    .class-card {
        background: white;
        padding: 20px;
        border-radius: 15px;
        margin-bottom: 20px;
        border-left: 5px solid #667eea;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    
    .class-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        flex-wrap: wrap;
    }
    
    .class-name { font-size: 1.3em; font-weight: bold; }
    .class-period { background: #f8f9fa; padding: 5px 15px; border-radius: 20px; font-size: 0.9em; color: #666; }
    
    .section {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 10px;
        margin-bottom: 15px;
    }
    
    .section h4 { margin: 0 0 15px 0; color: #555; font-size: 1.1em; }
    .notes-section { border-left: 3px solid #2196f3; }
    .assignments-section { border-left: 3px solid #ff9800; }
    
    .assignment-item {
        background: white;
        padding: 10px;
        border-radius: 8px;
        margin-bottom: 10px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .assignment-form {
        display: none;
        background: #e3f2fd;
        padding: 15px;
        border-radius: 8px;
        margin-top: 10px;
        border: 1px solid #bbdefb;
    }
    
    .assignment-form.active { display: block; }
    
    .form-row {
        display: grid;
        grid-template-columns: 2fr 1fr;
        gap: 15px;
        margin-bottom: 15px;
    }
    
    .empty-state { text-align: center; padding: 40px; color: #666; }
    .empty-state .icon { font-size: 4em; margin-bottom: 20px; }
    
    .filter-section {
        background: white;
        padding: 20px;
        border-radius: 15px;
        margin-bottom: 20px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        text-align: center;
    }
    
    .class-edit-item {
        background: white;
        padding: 15px;
        border-radius: 10px;
        margin-bottom: 15px;
        border-left: 5px solid #667eea;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    
    .class-edit-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
    }
    
    .class-edit-form {
        display: none;
        margin-top: 15px;
        padding: 15px;
        background: #f8f9fa;
        border-radius: 8px;
    }
    
    .class-edit-form.active { display: block; }
    
    .overdue { color: #f44336; font-weight: bold; }
    .due-today { color: #ff9800; font-weight: bold; }
    .due-soon { color: #ffc107; font-weight: bold; }
    
    @media (max-width: 768px) {
        .nav { flex-direction: column; }
        body { padding: 10px; }
        .date-nav { flex-direction: column; gap: 10px; }
        .class-header { flex-direction: column; align-items: flex-start; gap: 10px; }
        .form-row { grid-template-columns: 1fr; }
    }
</style>
```

</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìö My Assignment Notebook</h1>
            <p>Digital planner for organized students</p>
        </div>

```
    <div class="nav">
        <button class="nav-btn active" data-view="journal">üìù Daily Journal</button>
        <button class="nav-btn" data-view="assignments">üìã All Assignments</button>
        <button class="nav-btn" data-view="notes">üìö All Notes</button>
        <button class="nav-btn" data-view="setup">‚öôÔ∏è Setup Classes</button>
    </div>
    
    <!-- Daily Journal View -->
    <div class="view active" id="journalView">
        <div class="card">
            <div class="date-nav">
                <button id="prevDay">&larr;</button>
                <div class="current-date" id="currentDate">Today</div>
                <button id="nextDay">&rarr;</button>
                <button class="btn btn-success" id="todayBtn">üìÖ Today</button>
            </div>
        </div>
        <div id="classesContainer"></div>
    </div>
    
    <!-- All Assignments View -->
    <div class="view" id="assignmentsView">
        <div class="filter-section">
            <h2>üìã All Assignments</h2>
            <p>View and manage all your assignments across all classes.</p>
            <button class="btn btn-primary" id="exportBtn">üíæ Download Backup</button>
        </div>
        <div id="assignmentsList"></div>
    </div>
    
    <!-- All Notes View -->
    <div class="view" id="notesView">
        <div class="filter-section">
            <h2>üìö All Notes</h2>
            <label for="notesFilter">Filter by Subject: </label>
            <select id="notesFilter" class="form-control" style="width: auto; display: inline-block;">
                <option value="all">All Classes</option>
            </select>
        </div>
        <div id="notesList"></div>
    </div>
    
    <!-- Setup View -->
    <div class="view" id="setupView">
        <div class="card">
            <h2>‚öôÔ∏è Setup Your Classes</h2>
            <p>Add new classes or edit existing ones.</p>
            
            <!-- Existing Classes -->
            <div style="margin: 20px 0;">
                <h3>Your Classes</h3>
                <div id="existingClasses"></div>
            </div>
            
            <!-- Add New Class -->
            <div style="margin: 20px 0; padding: 20px; background: #f0f8ff; border-radius: 10px;">
                <h3>Add New Class</h3>
                <input type="text" class="form-control" id="className" placeholder="Class name (e.g., AP Biology)">
                <input type="text" class="form-control" id="classPeriod" placeholder="Period (e.g., 1st Period)">
                <button class="btn btn-primary" id="addClassBtn">Add Class</button>
            </div>
            
            <div style="margin-top: 30px; padding: 20px; background: #e8f4f8; border-radius: 10px;">
                <h3>üíæ Backup & Restore</h3>
                <button class="btn btn-primary" id="exportBtn2">üìÑ Download Backup</button>
                <input type="file" id="importFile" accept=".json" style="display: none;">
                <button class="btn btn-success" id="importBtn">üì§ Restore Backup</button>
            </div>
        </div>
    </div>
</div>

<script>
    // App State
    let currentDate = new Date();
    let classes = [];
    let journalEntries = {};
    let assignments = [];
    let nextClassId = 1;
    let nextAssignmentId = 1;
    let currentNotesFilter = 'all';
    
    // Utility Functions
    function getDateKey(date) {
        return date.toISOString().split('T')[0];
    }
    
    function formatDate(date) {
        return date.toLocaleDateString('en-US', { 
            weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' 
        });
    }
    
    function formatDueDate(dueDate) {
        if (!dueDate) return 'No due date';
        const due = new Date(dueDate);
        const today = new Date();
        const diffDays = Math.ceil((due - today) / (1000 * 60 * 60 * 24));
        
        if (diffDays < 0) return `${Math.abs(diffDays)} days ago`;
        if (diffDays === 0) return 'Today';
        if (diffDays === 1) return 'Tomorrow';
        return due.toLocaleDateString();
    }
    
    function getDueDateClass(dueDate) {
        if (!dueDate) return '';
        const due = new Date(dueDate);
        const today = new Date();
        const diffDays = Math.ceil((due - today) / (1000 * 60 * 60 * 24));
        
        if (diffDays < 0) return 'overdue';
        if (diffDays === 0) return 'due-today';
        if (diffDays === 1) return 'due-soon';
        return '';
    }
    
    function saveData() {
        try {
            localStorage.setItem('assignmentNotebook_classes', JSON.stringify(classes));
            localStorage.setItem('assignmentNotebook_entries', JSON.stringify(journalEntries));
            localStorage.setItem('assignmentNotebook_assignments', JSON.stringify(assignments));
            localStorage.setItem('assignmentNotebook_nextClassId', nextClassId.toString());
            localStorage.setItem('assignmentNotebook_nextAssignmentId', nextAssignmentId.toString());
        } catch (e) {
            console.error('Save failed:', e);
        }
    }
    
    function loadData() {
        try {
            const savedClasses = localStorage.getItem('assignmentNotebook_classes');
            const savedEntries = localStorage.getItem('assignmentNotebook_entries');
            const savedAssignments = localStorage.getItem('assignmentNotebook_assignments');
            const savedNextClassId = localStorage.getItem('assignmentNotebook_nextClassId');
            const savedNextAssignmentId = localStorage.getItem('assignmentNotebook_nextAssignmentId');
            
            if (savedClasses) classes = JSON.parse(savedClasses);
            if (savedEntries) journalEntries = JSON.parse(savedEntries);
            if (savedAssignments) assignments = JSON.parse(savedAssignments);
            if (savedNextClassId) nextClassId = parseInt(savedNextClassId);
            if (savedNextAssignmentId) nextAssignmentId = parseInt(savedNextAssignmentId);
        } catch (e) {
            console.error('Load failed:', e);
        }
    }
    
    // Navigation
    function showView(viewName) {
        document.querySelectorAll('.view').forEach(view => view.classList.remove('active'));
        document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
        
        document.getElementById(viewName + 'View').classList.add('active');
        document.querySelector(`[data-view="${viewName}"]`).classList.add('active');
        
        if (viewName === 'journal') renderJournal();
        else if (viewName === 'assignments') renderAllAssignments();
        else if (viewName === 'notes') renderAllNotes();
        else if (viewName === 'setup') renderSetup();
    }
    
    // Date Functions
    function updateDateDisplay() {
        const today = new Date();
        const isToday = currentDate.toDateString() === today.toDateString();
        const prefix = isToday ? 'Today, ' : '';
        document.getElementById('currentDate').textContent = prefix + formatDate(currentDate);
    }
    
    function changeDate(days) {
        currentDate.setDate(currentDate.getDate() + days);
        updateDateDisplay();
        renderJournal();
    }
    
    function goToToday() {
        currentDate = new Date();
        updateDateDisplay();
        renderJournal();
    }
    
    // Journal Functions
    function renderJournal() {
        const container = document.getElementById('classesContainer');
        
        if (classes.length === 0) {
            container.innerHTML = `
                <div class="card">
                    <div class="empty-state">
                        <div class="icon">üìö</div>
                        <h3>No classes set up yet!</h3>
                        <p>Go to "Setup Classes" to add your schedule first.</p>
                    </div>
                </div>
            `;
            return;
        }
        
        const dateKey = getDateKey(currentDate);
        const dayEntries = journalEntries[dateKey] || {};
        
        let html = '';
        classes.forEach(classItem => {
            const entry = dayEntries[classItem.id] || { notes: '', assignments: [] };
            
            html += `
                <div class="class-card">
                    <div class="class-header">
                        <div class="class-name">${classItem.name}</div>
                        <div class="class-period">${classItem.period}</div>
                    </div>
                    
                    <div class="section notes-section">
                        <h4>üìù Class Notes</h4>
                        <textarea class="form-control notes-textarea" data-class="${classItem.id}" rows="4" placeholder="What did you learn or discuss in class today?">${entry.notes}</textarea>
                        <small style="color: #666; font-size: 0.85em;">üíæ Notes save automatically</small>
                    </div>
                    
                    <div class="section assignments-section">
                        <h4>üìã Assignments</h4>
                        <div class="assignments-list">
                            ${entry.assignments.map(assignment => `
                                <div class="assignment-item">
                                    <div>
                                        <div style="font-weight: 600;">${assignment.title}</div>
                                        <div style="font-size: 0.9em;" class="${getDueDateClass(assignment.dueDate)}">
                                            Due: ${formatDueDate(assignment.dueDate)}
                                        </div>
                                    </div>
                                    <div>
                                        <button class="btn btn-success btn-small complete-assignment-btn" data-id="${assignment.id}">‚úÖ Complete</button>
                                        <button class="btn btn-danger btn-small remove-assignment-btn" data-class="${classItem.id}" data-id="${assignment.id}">‚úï</button>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                        <button class="btn btn-warning add-assignment-btn" data-class="${classItem.id}">+ Add Assignment</button>
                        <div class="assignment-form" id="assignmentForm-${classItem.id}">
                            <div class="form-row">
                                <input type="text" class="form-control" id="assignmentTitle-${classItem.id}" placeholder="Assignment title (e.g., Chapter 8 reading)">
                                <input type="date" class="form-control" id="assignmentDue-${classItem.id}">
                            </div>
                            <button class="btn btn-success save-assignment-btn" data-class="${classItem.id}">üíæ Save Assignment</button>
                            <button class="btn btn-secondary cancel-assignment-btn" data-class="${classItem.id}">‚ùå Cancel</button>
                        </div>
                    </div>
                </div>
            `;
        });
        
        container.innerHTML = html;
        attachJournalEventListeners();
    }
    
    function attachJournalEventListeners() {
        // Notes auto-save
        document.querySelectorAll('.notes-textarea').forEach(textarea => {
            textarea.addEventListener('blur', function() {
                const classId = parseInt(this.dataset.class);
                saveNotes(classId);
            });
        });
        
        // Add assignment buttons
        document.querySelectorAll('.add-assignment-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const classId = parseInt(this.dataset.class);
                showAssignmentForm(classId);
            });
        });
        
        // Save assignment buttons
        document.querySelectorAll('.save-assignment-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const classId = parseInt(this.dataset.class);
                saveAssignment(classId);
            });
        });
        
        // Cancel assignment buttons
        document.querySelectorAll('.cancel-assignment-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const classId = parseInt(this.dataset.class);
                hideAssignmentForm(classId);
            });
        });
        
        // Complete assignment buttons
        document.querySelectorAll('.complete-assignment-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const assignmentId = parseInt(this.dataset.id);
                completeAssignment(assignmentId);
            });
        });
        
        // Remove assignment buttons
        document.querySelectorAll('.remove-assignment-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const classId = parseInt(this.dataset.class);
                const assignmentId = parseInt(this.dataset.id);
                removeAssignment(classId, assignmentId);
            });
        });
    }
    
    function saveNotes(classId) {
        const textarea = document.querySelector(`.notes-textarea[data-class="${classId}"]`);
        const notes = textarea.value;
        const dateKey = getDateKey(currentDate);
        
        if (!journalEntries[dateKey]) journalEntries[dateKey] = {};
        if (!journalEntries[dateKey][classId]) journalEntries[dateKey][classId] = { notes: '', assignments: [] };
        
        journalEntries[dateKey][classId].notes = notes;
        saveData();
    }
    
    function showAssignmentForm(classId) {
        document.getElementById(`assignmentForm-${classId}`).classList.add('active');
        const today = new Date().toISOString().split('T')[0];
        document.getElementById(`assignmentDue-${classId}`).min = today;
    }
    
    function hideAssignmentForm(classId) {
        const form = document.getElementById(`assignmentForm-${classId}`);
        form.classList.remove('active');
        document.getElementById(`assignmentTitle-${classId}`).value = '';
        document.getElementById(`assignmentDue-${classId}`).value = '';
    }
    
    function saveAssignment(classId) {
        const title = document.getElementById(`assignmentTitle-${classId}`).value.trim();
        const dueDate = document.getElementById(`assignmentDue-${classId}`).value;
        
        if (!title) {
            alert('Please enter an assignment title');
            return;
        }
        
        const assignment = {
            id: nextAssignmentId++,
            title: title,
            dueDate: dueDate,
            classId: classId,
            completed: false,
            createdDate: getDateKey(currentDate)
        };
        
        const dateKey = getDateKey(currentDate);
        if (!journalEntries[dateKey]) journalEntries[dateKey] = {};
        if (!journalEntries[dateKey][classId]) journalEntries[dateKey][classId] = { notes: '', assignments: [] };
        
        journalEntries[dateKey][classId].assignments.push(assignment);
        assignments.push(assignment);
        
        hideAssignmentForm(classId);
        saveData();
        renderJournal();
        alert('Assignment added successfully!');
    }
    
    function removeAssignment(classId, assignmentId) {
        const dateKey = getDateKey(currentDate);
        if (journalEntries[dateKey] && journalEntries[dateKey][classId]) {
            journalEntries[dateKey][classId].assignments = journalEntries[dateKey][classId].assignments.filter(a => a.id !== assignmentId);
            assignments = assignments.filter(a => a.id !== assignmentId);
            saveData();
            renderJournal();
        }
    }
    
    function completeAssignment(assignmentId) {
        const assignment = assignments.find(a => a.id === assignmentId);
        if (assignment) {
            assignment.completed = true;
            assignment.completedDate = new Date().toISOString();
            saveData();
            renderJournal();
            alert(`‚úÖ "${assignment.title}" marked as complete!`);
        }
    }
    
    // All Assignments View
    function renderAllAssignments() {
        const container = document.getElementById('assignmentsList');
        
        if (assignments.length === 0) {
            container.innerHTML = `
                <div class="empty-state">
                    <div class="icon">üìã</div>
                    <h3>No assignments yet!</h3>
                    <p>Add assignments in your Daily Journal to see them here.</p>
                </div>
            `;
            return;
        }
        
        const pendingAssignments = assignments.filter(a => !a.completed);
        const completedAssignments = assignments.filter(a => a.completed);
        
        // Sort by due date
        pendingAssignments.sort((a, b) => {
            if (!a.dueDate && !b.dueDate) return 0;
            if (!a.dueDate) return 1;
            if (!b.dueDate) return -1;
            return new Date(a.dueDate) - new Date(b.dueDate);
        });
        
        let html = '';
        
        if (pendingAssignments.length > 0) {
            html += '<div class="card"><h3>üìã Pending Assignments</h3>';
            pendingAssignments.forEach(assignment => {
                const className = classes.find(c => c.id === assignment.classId)?.name || 'Unknown Class';
                html += `
                    <div class="assignment-item">
                        <div>
                            <div style="font-weight: 600;">${assignment.title}</div>
                            <div style="font-size: 0.9em; color: #666;">
                                ${className} ‚Ä¢ Due: <span class="${getDueDateClass(assignment.dueDate)}">${formatDueDate(assignment.dueDate)}</span>
                            </div>
                        </div>
                        <button class="btn btn-success btn-small" onclick="completeAssignmentFromList(${assignment.id})">‚úÖ Complete</button>
                    </div>
                `;
            });
            html += '</div>';
        }
        
        if (completedAssignments.length > 0) {
            html += '<div class="card"><h3>‚úÖ Completed Assignments</h3>';
            completedAssignments.forEach(assignment => {
                const className = classes.find(c => c.id === assignment.classId)?.name || 'Unknown Class';
                html += `
                    <div class="assignment-item" style="opacity: 0.7;">
                        <div>
                            <div style="font-weight: 600;">${assignment.title}</div>
                            <div style="font-size: 0.9em; color: #666;">
                                ${className} ‚Ä¢ Completed: ${new Date(assignment.completedDate).toLocaleDateString()}
                            </div>
                        </div>
                        <span style="color: #4caf50; font-weight: bold;">‚úÖ Done</span>
                    </div>
                `;
            });
            html += '</div>';
        }
        
        container.innerHTML = html;
    }
    
    function completeAssignmentFromList(assignmentId) {
        completeAssignment(assignmentId);
        renderAllAssignments();
    }
    
    // All Notes View
    function renderAllNotes() {
        populateNotesFilter();
        const container = document.getElementById('notesList');
        const allNotes = [];
        
        Object.keys(journalEntries).forEach(date => {
            Object.keys(journalEntries[date]).forEach(classId => {
                const entry = journalEntries[date][classId];
                if (entry.notes && entry.notes.trim()) {
                    const className = classes.find(c => c.id == classId)?.name || 'Unknown Class';
                    if (currentNotesFilter === 'all' || classId == currentNotesFilter) {
                        allNotes.push({ date, className, notes: entry.notes });
                    }
                }
            });
        });
        
        if (allNotes.length === 0) {
            container.innerHTML = `
                <div class="empty-state">
                    <div class="icon">üìù</div>
                    <h3>No notes found!</h3>
                    <p>Start taking notes in your Daily Journal to see them here.</p>
                </div>
            `;
            return;
        }
        
        allNotes.sort((a, b) => new Date(b.date) - new Date(a.date));
        
        container.innerHTML = allNotes.map(note => `
            <div class="card" style="margin-bottom: 15px;">
                <h4>${note.className}</h4>
                <p style="color: #666; font-size: 0.9em; margin-bottom: 10px;">
                    ${new Date(note.date).toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}
                </p>
                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; white-space: pre-wrap;">${note.notes}</div>
            </div>
        `).join('');
    }
    
    function populateNotesFilter() {
        const select = document.getElementById('notesFilter');
        let html = '<option value="all">All Classes</option>';
        
        classes.forEach(cls => {
            const selected = currentNotesFilter == cls.id ? ' selected' : '';
            html += `<option value="${cls.id}"${selected}>${cls.name}</option>`;
        });
        
        select.innerHTML = html;
    }
    
    // Setup Functions
    function renderSetup() {
        const container = document.getElementById('existingClasses');
        
        if (classes.length === 0) {
            container.innerHTML = '<p style="color: #666; text-align: center; padding: 20px;">No classes added yet. Add your first class below!</p>';
            return;
        }
        
        container.innerHTML = classes.map(cls => `
            <div class="class-edit-item">
                <div class="class-edit-header">
                    <div>
                        <div style="font-weight: bold; font-size: 1.1em;">${cls.name}</div>
                        <div style="color: #666; font-size: 0.9em;">${cls.period}</div>
                    </div>
                    <div>
                        <button class="btn btn-edit btn-small edit-class-btn" data-id="${cls.id}">‚úèÔ∏è Edit</button>
                        <button class="btn btn-danger btn-small delete-class-btn" data-id="${cls.id}">üóëÔ∏è Delete</button>
                    </div>
                </div>
                <div class="class-edit-form" id="editForm-${cls.id}">
                    <input type="text" class="form-control" id="editName-${cls.id}" value="${cls.name}" placeholder="Class name">
                    <input type="text" class="form-control" id="editPeriod-${cls.id}" value="${cls.period}" placeholder="Period">
                    <button class="btn btn-success save-class-btn" data-id="${cls.id}">üíæ Save Changes</button>
                    <button class="btn btn-secondary cancel-edit-btn" data-id="${cls.id}">‚ùå Cancel</button>
                </div>
            </div>
        `).join('');
        
        attachSetupEventListeners();
    }
    
    function attachSetupEventListeners() {
        // Edit buttons
        document.querySelectorAll('.edit-class-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const classId = parseInt(this.dataset.id);
                showEditForm(classId);
            });
        });
        
        // Delete buttons
        document.querySelectorAll('.delete-class-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const classId = parseInt(this.dataset.id);
                deleteClass(classId);
            });
        });
        
        // Save buttons
        document.querySelectorAll('.save-class-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const classId = parseInt(this.dataset.id);
                saveClassEdit(classId);
            });
        });
        
        // Cancel buttons
        document.querySelectorAll('.cancel-edit-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const classId = parseInt(this.dataset.id);
                hideEditForm(classId);
            });
        });
    }
    
    function showEditForm(classId) {
        // Hide all other edit forms
        document.querySelectorAll('.class-edit-form').forEach(form => {
            form.classList.remove('active');
        });
        
        // Show the specific edit form
        document.getElementById(`editForm-${classId}`).classList.add('active');
    }
    
    function hideEditForm(classId) {
        document.getElementById(`editForm-${classId}`).classList.remove('active');
    }
    
    function saveClassEdit(classId) {
        const nameInput = document.getElementById(`editName-${classId}`);
        const periodInput = document.getElementById(`editPeriod-${classId}`);
        
        const name = nameInput.value.trim();
        const period = periodInput.value.trim();
        
        if (!name) {
            alert('Please enter a class name');
            return;
        }
        
        // Find and update the class
        const classIndex = classes.findIndex(c => c.id === classId);
        if (classIndex !== -1) {
            classes[classIndex].name = name;
            classes[classIndex].period = period || classes[classIndex].period;
            
            saveData();
            renderSetup();
            alert('‚úÖ Class updated successfully!');
            
            // If we're currently viewing the journal, re-render it
            if (document.getElementById('journalView').classList.contains('active')) {
                renderJournal();
            }
        }
    }
    
    function deleteClass(classId) {
        const classToDelete = classes.find(c => c.id === classId);
        if (!classToDelete) return;
        
        const confirmMessage = `Are you sure you want to delete "${classToDelete.name}"?\n\nThis will also delete all associated notes and assignments for this class.`;
        
        if (confirm(confirmMessage)) {
            // Remove class from classes array
            classes = classes.filter(c => c.id !== classId);
            
            // Remove all journal entries for this class
            Object.keys(journalEntries).forEach(date => {
                if (journalEntries[date][classId]) {
                    delete journalEntries[date][classId];
                }
            });
            
            // Remove all assignments for this class
            assignments = assignments.filter(a => a.classId !== classId);
            
            saveData();
            renderSetup();
            alert('üóëÔ∏è Class deleted successfully!');
            
            // If we're currently viewing the journal, re-render it
            if (document.getElementById('journalView').classList.contains('active')) {
                renderJournal();
            }
        }
    }
    
    function addClass() {
        const nameInput = document.getElementById('className');
        const periodInput = document.getElementById('classPeriod');
        
        const name = nameInput.value.trim();
        const period = periodInput.value.trim();
        
        if (!name) {
            alert('Please enter a class name');
            return;
        }
        
        classes.push({
            id: nextClassId++,
            name: name,
            period: period || `Period ${classes.length + 1}`
        });
        
        nameInput.value = '';
        periodInput.value = '';
        saveData();
        renderSetup();
        alert('‚úÖ Class added successfully!');
    }
    
    // Backup Functions
    function exportData() {
        const data = {
            version: "1.0",
            exportDate: new Date().toISOString(),
            classes: classes,
            journalEntries: journalEntries,
            assignments: assignments
        };
        
        const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const link = document.createElement('a');
        link.href = url;
        link.download = 'MyAssignments_' + new Date().toISOString().split('T')[0] + '.json';
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        URL.revokeObjectURL(url);
        alert('üìÑ Backup downloaded successfully!');
    }
    
    function importData(event) {
        const file = event.target.files[0];
        if (!file) return;
        
        const reader = new FileReader();
        reader.onload = function(e) {
            try {
                const data = JSON.parse(e.target.result);
                if (confirm('This will replace your current data. Continue?')) {
                    if (data.classes) classes = data.classes;
                    if (data.journalEntries) journalEntries = data.journalEntries;
                    if (data.assignments) assignments = data.assignments;
                    saveData();
                    alert('‚úÖ Data restored successfully!');
                    location.reload();
                }
            } catch (error) {
                alert('‚ùå Invalid backup file');
            }
        };
        reader.readAsText(file);
        event.target.value = '';
    }
    
    // Event Listeners
    document.addEventListener('DOMContentLoaded', function() {
        // Navigation
        document.querySelectorAll('.nav-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                showView(this.dataset.view);
            });
        });
        
        // Date navigation
        document.getElementById('prevDay').addEventListener('click', () => changeDate(-1));
        document.getElementById('nextDay').addEventListener('click', () => changeDate(1));
        document.getElementById('todayBtn').addEventListener('click', goToToday);
        
        // Setup
        document.getElementById('addClassBtn').addEventListener('click', addClass);
        
        // Export buttons
        document.getElementById('exportBtn').addEventListener('click', exportData);
        document.getElementById('exportBtn2').addEventListener('click', exportData);
        
        // Import
        document.getElementById('importBtn').addEventListener('click', () => {
            document.getElementById('importFile').click();
        });
        document.getElementById('importFile').addEventListener('change', importData);
        
        // Notes filter
        document.getElementById('notesFilter').addEventListener('change', function() {
            currentNotesFilter = this.value;
            renderAllNotes();
        });
        
        // Initialize app
        loadData();
        updateDateDisplay();
        
        if (classes.length === 0) {
            // If no classes, show setup view
            showView('setup');
        } else {
            renderJournal();
        }
    });
    
    // Global functions for onclick handlers
    window.completeAssignmentFromList = completeAssignmentFromList;
</script>
```

</body>
</html>
